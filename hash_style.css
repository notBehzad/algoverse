:root {
    --bg-color: #f5f5f7;
    --dark: #1c1c1e;
    --accent: #007aff; 
    --success: #34c759; 
    --danger: #ff3b30; 
    --font: 'Montserrat', sans-serif;
}

body { margin: 0; background: var(--bg-color); font-family: var(--font); height: 100vh; display: flex; flex-direction: column; }

.header { background: var(--dark); color: white; padding: 15px; text-align: center; font-weight: 700; font-size: 20px; flex-shrink: 0; }
.controls-container { background: #2c2c2e; padding: 15px; display: flex; justify-content: center; gap: 20px; align-items: center; z-index: 10; flex-shrink: 0; }
.group { background: rgba(255,255,255,0.08); padding: 8px 12px; border-radius: 10px; display: flex; align-items: center; gap: 10px; }
.label { color: #888; font-size: 12px; font-weight: 600; }

input { background: #444; border: none; color: white; padding: 10px; border-radius: 8px; width: 60px; text-align: center; font-size: 16px; outline: none; font-family: var(--font); }
button { padding: 10px 20px; border-radius: 8px; border: none; font-weight: 600; cursor: pointer; color: white; transition: 0.2s; font-family: var(--font); }
button.primary { background: var(--accent); }
button.secondary { background: #555; }
button:hover { transform: translateY(-2px); }

.status-bar { color: #bbb; font-style: italic; min-width: 200px; text-align: right; font-size: 14px;}

.main-stage { 
    flex: 1; 
    position: relative; 
    background: #fafafa; 
    overflow-y: auto; 
    overflow-x: hidden;
}

svg { 
    display: block; 
    overflow: visible;
    min-height: 100%;
}

.bucket-rect { fill: var(--dark); rx: 8; filter: url(#softShadow); }
.bucket-text { fill: white; font-weight: 700; font-size: 14px; text-anchor: middle; dominant-baseline: middle; }
.bucket-idx { fill: #888; font-size: 10px; text-anchor: middle; }

.chain-group { transition: transform 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275), opacity 0.4s; }
.chain-rect { fill: white; stroke: var(--dark); stroke-width: 2px; rx: 6; filter: url(#softShadow); transition: stroke 0.3s; }
.chain-text { fill: var(--dark); font-weight: 700; font-size: 16px; text-anchor: middle; dominant-baseline: middle; }

.connector { stroke: #ccc; stroke-width: 2; marker-end: url(#arrow); transition: stroke 0.3s; }

.highlight-bucket { fill: var(--accent) !important; }
.highlight-node rect { stroke: var(--accent) !important; } 
.found-node rect { fill: var(--success) !important; stroke: var(--success) !important; }
.found-node text { fill: white !important; }
.error-node rect { stroke: var(--danger) !important; }



body {
    opacity: 0; 
    animation: visualizerEntrance 0.6s ease-out forwards;
}

@keyframes visualizerEntrance {
    from {
        opacity: 0;
        transform: translateY(15px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}